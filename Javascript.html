<!doctype html>
<html>
    <head>
		<title>Temperatures of 1984</title>
	</head>
	<body>
		<textarea id="rawdata">
		#date,maxtemp
		 19840101,   90
		 19840102,   76
		 19840103,   59
		 19840104,   38
		 19840105,   32
		 19840106,   49
		 19840107,   57
		 19840108,   40
		 19840109,   30
		 19840110,   27
		 19840111,   69
		 19840112,   44
		 19840113,   64
		 19840114,   56
		 19840115,   31
		 19840116,   55
		 19840117,   55
		 19840118,   33
		 19840119,   -1
		 19840120,    4
		 19840121,  -20
		 19840122,  -30
		 19840123,  -22
		 19840124,   13
		 19840125,    3
		 19840126,    5
		 19840127,   35
		 19840128,   43
		 19840129,   46
		 19840130,   43
		 19840131,   41
		 19840201,   24
		 19840202,   56
		 19840203,   58
		 19840204,   60
		 19840205,   58
		 19840206,   69
		 19840207,   49
		 19840208,   44
		 19840209,   39
		 19840210,   49
		 19840211,   60
		 19840212,   17
		 19840213,    8
		 19840214,   -9
		 19840215,  -24
		 19840216,  -32
		 19840217,  -37
		 19840218,  -22
		 19840219,  -21
		 19840220,  -10
		 19840221,   38
		 19840222,   29
		 19840223,    2
		 19840224,    7
		 19840225,    5
		 19840226,   15
		 19840227,   16
		 19840228,   23
		 19840229,    2
		 19840301,   15
		 19840302,   37
		 19840303,   28
		 19840304,   17
		 19840305,   51
		 19840306,   62
		 19840307,   54
		 19840308,   28
		 19840309,   12
		 19840310,   16
		 19840311,   45
		 19840312,   44
		 19840313,   28
		 19840314,   35
		 19840315,   36
		 19840316,   22
		 19840317,   24
		 19840318,   24
		 19840319,   31
		 19840320,   29
		 19840321,   29
		 19840322,   27
		 19840323,   42
		 19840324,   64
		 19840325,   71
		 19840326,   69
		 19840327,   72
		 19840328,   82
		 19840329,   53
		 19840330,   46
		 19840331,   36
		 19840401,   23
		 19840402,   29
		 19840403,   25
		 19840404,   36
		 19840405,   32
		 19840406,   48
		 19840407,   47
		 19840408,   46
		 19840409,   54
		 19840410,   50
		 19840411,   62
		 19840412,   63
		 19840413,   64
		 19840414,   95
		 19840415,  100
		 19840416,   61
		 19840417,   59
		 19840418,   66
		 19840419,   97
		 19840420,  114
		 19840421,  134
		 19840422,  137
		 19840423,  109
		 19840424,  139
		 19840425,  142
		 19840426,  121
		 19840427,  102
		 19840428,   95
		 19840429,   92
		 19840430,  114
		 19840501,   92
		 19840502,  101
		 19840503,  112
		 19840504,  114
		 19840505,  118
		 19840506,   87
		 19840507,   77
		 19840508,   77
		 19840509,   68
		 19840510,   68
		 19840511,   77
		 19840512,   92
		 19840513,  110
		 19840514,  124
		 19840515,  124
		 19840516,  128
		 19840517,  105
		 19840518,  116
		 19840519,  108
		 19840520,  113
		 19840521,   98
		 19840522,  111
		 19840523,   99
		 19840524,  121
		 19840525,   95
		 19840526,  114
		 19840527,  118
		 19840528,  112
		 19840529,  112
		 19840530,  138
		 19840531,  145
		 19840601,  133
		 19840602,  146
		 19840603,  142
		 19840604,  105
		 19840605,  119
		 19840606,  122
		 19840607,  118
		 19840608,  117
		 19840609,  123
		 19840610,  139
		 19840611,  128
		 19840612,  143
		 19840613,  151
		 19840614,  136
		 19840615,  128
		 19840616,  129
		 19840617,  150
		 19840618,  169
		 19840619,  188
		 19840620,  211
		 19840621,  164
		 19840622,  141
		 19840623,  124
		 19840624,  118
		 19840625,  133
		 19840626,  151
		 19840627,  153
		 19840628,  121
		 19840629,  117
		 19840630,  109
		 19840701,  124
		 19840702,  124
		 19840703,  116
		 19840704,  124
		 19840705,  137
		 19840706,  134
		 19840707,  173
		 19840708,  216
		 19840709,  214
		 19840710,  178
		 19840711,  176
		 19840712,  177
		 19840713,  167
		 19840714,  147
		 19840715,  136
		 19840716,  140
		 19840717,  142
		 19840718,  157
		 19840719,  146
		 19840720,  144
		 19840721,  149
		 19840722,  144
		 19840723,  149
		 19840724,  152
		 19840725,  142
		 19840726,  147
		 19840727,  160
		 19840728,  162
		 19840729,  189
		 19840730,  242
		 19840731,  219
		 19840801,  180
		 19840802,  157
		 19840803,  178
		 19840804,  181
		 19840805,  164
		 19840806,  154
		 19840807,  156
		 19840808,  169
		 19840809,  174
		 19840810,  160
		 19840811,  158
		 19840812,  189
		 19840813,  190
		 19840814,  176
		 19840815,  160
		 19840816,  174
		 19840817,  167
		 19840818,  172
		 19840819,  204
		 19840820,  209
		 19840821,  212
		 19840822,  225
		 19840823,  225
		 19840824,  227
		 19840825,  205
		 19840826,  180
		 19840827,  152
		 19840828,  174
		 19840829,  172
		 19840830,  188
		 19840831,  185
		 19840901,  186
		 19840902,  191
		 19840903,  197
		 19840904,  152
		 19840905,  118
		 19840906,  129
		 19840907,  116
		 19840908,  126
		 19840909,  138
		 19840910,  132
		 19840911,  137
		 19840912,  139
		 19840913,  153
		 19840914,  162
		 19840915,  154
		 19840916,  153
		 19840917,  135
		 19840918,  141
		 19840919,  138
		 19840920,  133
		 19840921,  115
		 19840922,   97
		 19840923,  100
		 19840924,   88
		 19840925,  100
		 19840926,  116
		 19840927,  118
		 19840928,  123
		 19840929,  142
		 19840930,  128
		 19841001,  123
		 19841002,  113
		 19841003,  104
		 19841004,  105
		 19841005,  102
		 19841006,  113
		 19841007,  109
		 19841008,  127
		 19841009,  139
		 19841010,  135
		 19841011,  130
		 19841012,  117
		 19841013,  128
		 19841014,  137
		 19841015,  139
		 19841016,  135
		 19841017,  119
		 19841018,  121
		 19841019,  116
		 19841020,  113
		 19841021,   98
		 19841022,  115
		 19841023,  126
		 19841024,  113
		 19841025,  133
		 19841026,  100
		 19841027,   66
		 19841028,   83
		 19841029,  128
		 19841030,  135
		 19841031,  103
		 19841101,  120
		 19841102,  107
		 19841103,   88
		 19841104,   71
		 19841105,   60
		 19841106,   91
		 19841107,   85
		 19841108,  107
		 19841109,  125
		 19841110,  107
		 19841111,  105
		 19841112,   89
		 19841113,   76
		 19841114,   71
		 19841115,   41
		 19841116,   32
		 19841117,   22
		 19841118,   55
		 19841119,   65
		 19841120,   73
		 19841121,   86
		 19841122,  112
		 19841123,  114
		 19841124,  108
		 19841125,   85
		 19841126,   62
		 19841127,   54
		 19841128,   70
		 19841129,   87
		 19841130,   84
		 19841201,   70
		 19841202,   40
		 19841203,   40
		 19841204,   44
		 19841205,   72
		 19841206,   46
		 19841207,   19
		 19841208,   35
		 19841209,   63
		 19841210,   71
		 19841211,   62
		 19841212,   60
		 19841213,   47
		 19841214,   53
		 19841215,   35
		 19841216,   36
		 19841217,   49
		 19841218,   36
		 19841219,   54
		 19841220,   87
		 19841221,   64
		 19841222,   36
		 19841223,   44
		 19841224,   48
		 19841225,   43
		 19841226,   31
		 19841227,   24
		 19841228,   10
		 19841229,    8
		 19841230,   -2
		 19841231,   16
		</textarea>
    </body>
	<h1>
	<script>
	// Acquires the raw data
	var link = document.getElementById("rawdata");

	// Splits the raw data
	var link = document.getElementById("rawdata").value;
	var splitted = (link).split("\n");
	
	var length = splitted.length;
	var len = length - 1;
	
	// Initializes the variables
	X = [];
	Y = [];
	miliseconds = [];
	days = [];
	before = 441673200000;
	
	// Cuts the splitted data into two arrays of time and temperature
	// Changes the times to dates, miliseconds and days. 
	// Changes the temperature strings to integers.
	for (var i = 1; i < (len); i++)
	{
		var chunks = splitted[i].split(",");
		X[i] = chunks[0];
		Y[i] = chunks[1];
		Y[i] = +Y[i];
		Y[i] = Y[i] / 10;
		X[i] = new Date((X[i]).replace(
		/(\d\d\d\d)(\d\d)(\d\d)/, '$2-$3-$1'));
		miliseconds[i] = X[i].getTime();
		miliseconds[i] = miliseconds[i] - before;
		days[i] = miliseconds[i] / (1000*60*60*24);
	}
	
	// Calculates the max and min values of the temperature array
	var tempmax = 0;
	var tempmin = 0;
	for (var counter = 0; counter < len; counter++) {
		if (Y[counter] > tempmax)
			tempmax = Y[counter];
		if (Y[counter] < tempmin)
			tempmin = Y[counter];
	}
	
	</script>
	<canvas id="myCanvas" width="1500" height="800"></canvas>
    <script> "use strict"
	
	// Sets the name and frame of the canvas
	var canvas = document.getElementById('myCanvas');
	var context = canvas.getContext('2d');
	context.font = '48px serif';
	context.fillText('Maximum Temperature in De Bilt (NL)', 100, 50);
	
	// Sets the dimensions of the graph.
	var Xmax = 1300;
	var XMin = 100;
	var YMin = 700;
	var YMax = 100;
	
	// Draws the Y-axis
	context.beginPath();
    context.moveTo(XMin, YMax);
    context.lineTo(XMin, YMin);
    context.stroke();
	
	// Draws the X-axis
	context.beginPath();
    context.moveTo(YMax, YMin);
    context.lineTo(Xmax, YMin);
    context.stroke();
	
	// Draws the Text
	context.font = '18px serif';
	context.fillText('1984', 1310, 710);
	context.font = '15px serif';
	context.fillText('Maxtemp in Celsius', 20, 80);

	// Creates arrays for the month clicks and temperature clicks
	var clicks = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335, 366];
	var months = ["January", "February", "March", "April", "May", "June"
		, "July", "Augustus", "September", "October", "November", "December", ""];
	var temps = [tempmin, 0, 5, 10, 15, 20, tempmax]
	
	// Transforms the datapoints to coordinates within range of the canvas
	var xaxis = createTransform([days[1], days[366]], [100, 1300]);
	var yaxis = createTransform([tempmax, tempmin], [100, 700]);
	
	// Draws the graph of temperature against time
	for (var j = 0; j < (len); j++){
		context.beginPath();
		context.moveTo(xaxis(j), yaxis(Y[j]));
		context.lineTo(xaxis(j+1), yaxis(Y[j+1]));
		context.stroke();
    }

	// draws the clicks and text on the Y and X-axis
	for (var y = 0; y < 7; y++){
		context.beginPath();
		context.moveTo(100, yaxis(temps[y]));
		context.lineTo(90, yaxis(temps[y]));
		context.stroke();
		context.font = '12px serif';
		context.fillText(temps[y], 65, yaxis(temps[y]));
    }

	for (var x = 0; x < 13; x++){
		context.beginPath();
		context.moveTo(xaxis(clicks[x]), 700);
		context.lineTo(xaxis(clicks[x]), 710);
		context.stroke();
		context.font = '18px serif';
		context.fillText(months[x], xaxis(clicks[x]), 725);
    }

	function createTransform(domain, range){
		// domain is a two-element array of the data bounds [domain_min, domain_max]
		// range is a two-element array of the screen bounds [range_min, range_max]
		// this gives you two equations to solve:
		// range_min = alpha * domain_min + beta
		// range_max = alpha * domain_max + beta
			// a solution would be:

		var domain_min = domain[0]
		var domain_max = domain[1]
		var range_min = range[0]
		var range_max = range[1]

		// formulas to calculate the alpha and the beta
		var alpha = (range_max - range_min) / (domain_max - domain_min)
		var beta = range_max - alpha * domain_max

		// returns the function for the linear transformation (y= a * x + b)
		return function(x){
		  return alpha * x + beta;
		}
	}
	 
	</script>
</html>